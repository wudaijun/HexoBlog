基于上个项目对微服务的实践，一直想从设计而不是实现上整理下自己对微服务的一些理解。

简单来说，微服务通过**依赖查找**实现了设计模式中的**控制反转**，降低了系统组件(服务)之间的耦合度。微服务的核心就这一点，其它如可维护，易测试，方便部署等，都是衍生特性。微服务的并不是一个新概念，控制反转在2004年就提出了，之所以微服务这几年特别地火，我认为主要的原因是配套组件日渐成熟：服务发现有etcd,zookeeper，服务部署有docker，集成测试有jenkins, gitlab ci等。这为微服务提供了一个良好的生态。

微服务设计要注意的问题：

- 一致性问题：典型地服务注册和注销时的一致性问题，如果是强一致性，考虑性能问题，否则考虑最终一致性可能带来的风险。
- 安全启动和终止：服务的启动顺序和停止顺序，服务之间可能存在依赖，如Gate依赖Game，Game依赖DB，在启动和终止时要处理好这种依赖。
- 服务的数据交互：对于逻辑相关性较强的服务，纯异步？单写入者Cache？Redis？
- 服务的逻辑交互：某操作需要在多个服务上执行Check，Do操作时，如果在某个服务上Check Failed，执行链中断了，那么这个操作是否考虑回滚，抑或通过其它方式(如Cache)减少执行链中断的可能性。

